/**
 * @fileoverview Firestore Security Rules for the 'orders' collection.
 *
 * Core Philosophy:
 * This ruleset provides public read access to the 'orders' collection,
 * enabling the display of all orders in the application. Write access
 * is currently open, but this is intended for prototyping only and MUST
 * be secured when user authentication is implemented.
 *
 * Data Structure:
 * All order documents are stored in the top-level '/orders/{orderId}' collection.
 *
 * Key Security Decisions:
 * - Public read access is granted to allow displaying orders.
 * - Write access is currently open for prototyping and MUST be restricted
 *   in future versions with authentication.
 * - No user listing is allowed as there are no users in this prototype.
 *
 * Denormalization for Authorization:
 * - No denormalization is currently used because authentication is not yet implemented.
 *   Future versions will need to denormalize user roles or permissions into the order
 *   documents to control write access.
 *
 * Structural Segregation:
 * - All orders are placed in a single collection, simplifying the initial security rules setup.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Allows public read access (get, list) to the 'orders' collection. Write access (create, update, delete) is currently open for prototyping but MUST be secured later.
     * @path /orders/{orderId}
     * @allow (get, list) Allows any user to read any order.
     * @deny (create, update, delete) Write operations are open for prototyping and MUST be secured.
     * @principle Allows public read access for prototyping. Write access MUST be secured later.
     */
    match /orders/{orderId} {
      allow get, list: if true;
      allow create: if true; // TODO: Secure create access when authentication is implemented.
      allow update: if true; // TODO: Secure update access when authentication is implemented.
      allow delete: if true; // TODO: Secure delete access when authentication is implemented.
    }
  }
}