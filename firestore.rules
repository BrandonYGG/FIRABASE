/**
 * @fileoverview Firestore Security Rules for the "orders" collection.
 *
 * Core Philosophy:
 * This ruleset provides basic read and write access to the `/orders/{orderId}` collection
 * without user authentication. This is intended for the initial prototyping phase
 * where the application operates purely on the frontend and data is stored temporarily.
 * In future iterations, this will be expanded to incorporate user-based access controls.
 *
 * Data Structure:
 * All order data is stored in a flat `/orders` collection, with each document identified by its `orderId`.
 *
 * Key Security Decisions:
 * - No user authentication is required in this initial phase.
 * - All users can read (get and list) all orders.
 * - All users can create, update, and delete any order. This will be restricted in future versions.
 * - The ruleset does NOT validate the data schema in this prototype phase.
 *
 * Denormalization for Authorization:
 * Not applicable in this initial phase, as there is no user authentication.
 *
 * Structural Segregation:
 * All orders are stored in a single collection.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Allows read access (get and list) to all documents in the `/orders` collection. Allows any user to create, update, and delete documents in the `/orders` collection.
     * @path /orders/{orderId}
     * @allow (get, list): Any user can read any order.
     * @allow (create, update, delete): Any user can create, update, or delete any order.
     * @deny None - All requests are allowed in the initial prototyping phase.
     * @principle No authentication required. Open access for initial prototyping.
     */
    match /orders/{orderId} {
      allow get, list: if true;
      allow create, update, delete: if true; // CRITICAL: Remove this and implement ownership checks in future versions.
    }
  }
}