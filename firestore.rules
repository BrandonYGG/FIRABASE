/**
 * @description This ruleset enforces a public-read, owner-write model for the 'orders' collection.
 * All users can read order details, but only authenticated users can create, update, or delete orders.
 * @dataStructure All order documents are stored in a single top-level `/orders` collection.
 * @keySecurityDecisions Read access is public to enable order display. Write access is restricted to authenticated users, but write access does not check authorization as the schema is missing an owner field.
 * @denormalizationForAuthorization Not applicable in the current public read setup.
 * @structuralSegregation All orders are stored in a single, public collection.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Allows anyone to read order details, but restricts create, update, and delete operations to authenticated users.
     * @path /orders/{orderId}
     * @allow (get, list) Any user can read orders.
     * @deny (create, update, delete) Only authenticated users can create, update, or delete orders, however, no authorization check is performed.
     * @principle Public read, authenticated write.
     */
    match /orders/{orderId} {
      allow get, list: if true;
      allow create, update, delete: if false; // TODO: Add owner validation once the schema is updated with an ownership field.
    }
  }
}