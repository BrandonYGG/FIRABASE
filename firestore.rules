/**
 * @fileoverview Firestore Security Rules for the Construction Material Orders app.
 *
 * Core Philosophy:
 * This ruleset is in prototyping mode. All reads are public. All writes are currently open. When authentication is added, the rules will be updated to enforce stricter access control.
 *
 * Data Structure:
 * All order data is stored in a single top-level collection: `/pedidos/{pedidoId}`.
 *
 * Key Security Decisions:
 * - User listing is not supported.
 * - No schema validation is enforced during this prototype phase.
 * - The rules are structured to easily accommodate user authentication and role-based access control in the future.
 * - In the future, to secure write operations, consider adding a `creatorId` field to each order and use that for ownership checks.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Grants public read access to all orders and, for now, allows anyone to create, update, and delete orders.
     * @path /pedidos/{pedidoId}
     * @allow (get, list): if true
     * @allow (create): if true // In the future, this will be restricted to authenticated users with appropriate permissions.
     * @allow (update): if true // In the future, this will be restricted to the order owner or admin.
     * @allow (delete): if true // In the future, this will be restricted to the order owner or admin.
     * @principle Allows public read access for prototyping. Write access will be secured with authentication in the next phase.
     */
    match /pedidos/{pedidoId} {
      allow get: if true;
      allow list: if true;
      allow create: if true;
      allow update: if true;
      allow delete: if true;
    }
  }
}